"use strict";(self["webpackChunkdata_processor_frontend"]=self["webpackChunkdata_processor_frontend"]||[]).push([[921],{921:(s,e,o)=>{o.r(e),o.d(e,{default:()=>F});var r=o(641),a=o(33),t=o(751);const n={class:"verify-reset-code-container"},i={class:"card login-card"},d={class:"card-body"},l={key:0,class:"form-container"},c={class:"form-group"},u={key:0,class:"invalid-feedback"},p={class:"form-actions d-flex flex-column"},w=["disabled"],f={key:0},h={key:1},k={class:"resend-code mt-4 text-center"},m=["disabled"],L={key:0},g={key:1},C={key:2},v={key:1,class:"form-container"},b={class:"form-group"},y={key:0,class:"invalid-feedback"},E={class:"form-group"},P={key:0,class:"invalid-feedback"},R={class:"form-actions d-flex flex-column"},X=["disabled"],x={key:0},V={key:1},I={key:2,class:"success-message"},_={key:3,class:"error-message"},T={class:"form-actions mt-3 d-flex flex-column"};function q(s,e,o,q,A,B){return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("div",i,[(0,r.Lk)("div",d,[e[33]||(e[33]=(0,r.Lk)("h2",{class:"text-center mb-4"},[(0,r.Lk)("span",{class:"brand-name"},[(0,r.eW)("Aqua"),(0,r.Lk)("span",{class:"text-success"},"Green")])],-1)),e[34]||(e[34]=(0,r.Lk)("h3",{class:"text-center mb-4"},"Verify Reset Code",-1)),"verify-code"===s.step?((0,r.uX)(),(0,r.CE)("div",l,[e[19]||(e[19]=(0,r.Lk)("p",{class:"instruction"},"Enter the verification code sent to your email.",-1)),(0,r.Lk)("div",c,[e[14]||(e[14]=(0,r.Lk)("label",{for:"code"},"Verification Code",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"code","onUpdate:modelValue":e[0]||(e[0]=e=>s.code=e),class:(0,a.C4)(["form-control",{"is-invalid":s.codeError}]),placeholder:"Enter 6-digit code",onInput:e[1]||(e[1]=e=>s.codeError=""),maxlength:"6",inputmode:"numeric",pattern:"[0-9]*"},null,34),[[t.Jo,s.code]]),s.codeError?((0,r.uX)(),(0,r.CE)("div",u,(0,a.v_)(s.codeError),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",p,[(0,r.Lk)("button",{onClick:e[2]||(e[2]=(...e)=>s.goBack&&s.goBack(...e)),class:"btn btn-outline-secondary w-100 mb-3"},e[15]||(e[15]=[(0,r.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,r.eW)(" Back ")])),(0,r.Lk)("button",{onClick:e[3]||(e[3]=(...e)=>s.verifyCode&&s.verifyCode(...e)),class:"btn btn-success w-100",disabled:s.isLoading},[s.isLoading?((0,r.uX)(),(0,r.CE)("span",f,e[16]||(e[16]=[(0,r.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,r.eW)(" Verifying... ")]))):((0,r.uX)(),(0,r.CE)("span",h,"Verify Code"))],8,w)]),(0,r.Lk)("div",k,[e[18]||(e[18]=(0,r.Lk)("p",null,"Didn't receive the code?",-1)),(0,r.Lk)("button",{onClick:e[4]||(e[4]=(...e)=>s.resendCode&&s.resendCode(...e)),class:"btn btn-link p-0",disabled:s.resendLoading||s.resendCountdown>0},[s.resendLoading?((0,r.uX)(),(0,r.CE)("span",L,e[17]||(e[17]=[(0,r.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,r.eW)(" Sending... ")]))):s.resendCountdown>0?((0,r.uX)(),(0,r.CE)("span",g," Resend code in "+(0,a.v_)(s.resendCountdown)+" seconds ",1)):((0,r.uX)(),(0,r.CE)("span",C,"Resend Code"))],8,m)])])):"set-password"===s.step?((0,r.uX)(),(0,r.CE)("div",v,[e[24]||(e[24]=(0,r.Lk)("p",{class:"instruction"},"Enter your new password below to reset your account password.",-1)),(0,r.Lk)("div",b,[e[20]||(e[20]=(0,r.Lk)("label",{for:"password"},"New Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":e[5]||(e[5]=e=>s.password=e),class:(0,a.C4)(["form-control",{"is-invalid":s.passwordError}]),placeholder:"Enter your new password",onInput:e[6]||(e[6]=e=>s.passwordError="")},null,34),[[t.Jo,s.password]]),s.passwordError?((0,r.uX)(),(0,r.CE)("div",y,(0,a.v_)(s.passwordError),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",E,[e[21]||(e[21]=(0,r.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[7]||(e[7]=e=>s.confirmPassword=e),class:(0,a.C4)(["form-control",{"is-invalid":s.confirmPasswordError}]),placeholder:"Confirm your new password",onInput:e[8]||(e[8]=e=>s.confirmPasswordError="")},null,34),[[t.Jo,s.confirmPassword]]),s.confirmPasswordError?((0,r.uX)(),(0,r.CE)("div",P,(0,a.v_)(s.confirmPasswordError),1)):(0,r.Q3)("",!0)]),e[25]||(e[25]=(0,r.Lk)("div",{class:"password-requirements"},[(0,r.Lk)("h4",null,"Password Requirements:"),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"At least 8 characters long"),(0,r.Lk)("li",null,"Contains at least one uppercase letter"),(0,r.Lk)("li",null,"Contains at least one lowercase letter"),(0,r.Lk)("li",null,"Contains at least one number"),(0,r.Lk)("li",null,"Cannot be too similar to your username or email")])],-1)),(0,r.Lk)("div",R,[(0,r.Lk)("button",{onClick:e[9]||(e[9]=(...e)=>s.goBackToCodeVerification&&s.goBackToCodeVerification(...e)),class:"btn btn-outline-secondary w-100 mb-3"},e[22]||(e[22]=[(0,r.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,r.eW)(" Back ")])),(0,r.Lk)("button",{onClick:e[10]||(e[10]=(...e)=>s.resetPassword&&s.resetPassword(...e)),class:"btn btn-success w-100",disabled:s.isLoading},[s.isLoading?((0,r.uX)(),(0,r.CE)("span",x,e[23]||(e[23]=[(0,r.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,r.eW)(" Resetting... ")]))):((0,r.uX)(),(0,r.CE)("span",V,"Reset Password"))],8,X)])])):"success"===s.step?((0,r.uX)(),(0,r.CE)("div",I,[e[26]||(e[26]=(0,r.Lk)("i",{class:"fas fa-check-circle success-icon"},null,-1)),e[27]||(e[27]=(0,r.Lk)("h3",null,"Password Reset Complete!",-1)),e[28]||(e[28]=(0,r.Lk)("p",null,"Your password has been successfully reset.",-1)),e[29]||(e[29]=(0,r.Lk)("p",null,"You can now log in with your new password.",-1)),(0,r.Lk)("button",{onClick:e[11]||(e[11]=(...e)=>s.goToLogin&&s.goToLogin(...e)),class:"btn btn-success w-100 mt-3"}," Go to Login ")])):"error"===s.step?((0,r.uX)(),(0,r.CE)("div",_,[e[30]||(e[30]=(0,r.Lk)("i",{class:"fas fa-exclamation-circle error-icon"},null,-1)),e[31]||(e[31]=(0,r.Lk)("h3",null,"Password Reset Failed",-1)),(0,r.Lk)("p",null,(0,a.v_)(s.errorMessage),1),e[32]||(e[32]=(0,r.Lk)("p",{class:"note"},"Please try again or request a new verification code.",-1)),(0,r.Lk)("div",T,[(0,r.Lk)("button",{onClick:e[12]||(e[12]=(...e)=>s.goToForgotPassword&&s.goToForgotPassword(...e)),class:"btn btn-outline-secondary w-100 mb-3"}," Request New Code "),(0,r.Lk)("button",{onClick:e[13]||(e[13]=(...e)=>s.goToLogin&&s.goToLogin(...e)),class:"btn btn-success w-100"}," Return to Login ")])])):(0,r.Q3)("",!0)])])])}var A=o(335);const B=(0,r.pM)({name:"VerifyResetCodeView",data(){return{email:"",code:"",password:"",confirmPassword:"",codeError:"",passwordError:"",confirmPasswordError:"",isLoading:!1,resendLoading:!1,resendCountdown:0,countdownInterval:null,step:"verify-code",errorMessage:""}},created(){this.email=this.$route.params.email||this.$route.query.email,this.email||this.$router.push("/forgot-password")},beforeUnmount(){this.stopResendCountdown()},methods:{goBack(){this.$router.push("/forgot-password")},goToLogin(){this.$router.push("/login")},goToForgotPassword(){this.$router.push("/forgot-password")},goBackToCodeVerification(){this.step="verify-code"},startResendCountdown(){this.resendCountdown=60,this.stopResendCountdown(),this.countdownInterval=setInterval((()=>{this.resendCountdown>0?this.resendCountdown--:this.stopResendCountdown()}),1e3)},stopResendCountdown(){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)},async resendCode(){if(!(this.resendLoading||this.resendCountdown>0)){this.resendLoading=!0;try{await A.A.post("auth/password-reset-otp/request-code/",{email:this.email}),this.startResendCountdown()}catch(s){console.error("Failed to resend verification code:",s)}finally{this.resendLoading=!1}}},async verifyCode(){if(this.code)if(/^\d{6}$/.test(this.code)){this.isLoading=!0;try{await A.A.post("auth/password-reset-otp/verify-code/",{email:this.email,code:this.code}),this.step="set-password"}catch(s){console.error("Code verification failed:",s),this.codeError="Invalid or expired verification code"}finally{this.isLoading=!1}}else this.codeError="Please enter a valid 6-digit code";else this.codeError="Verification code is required"},validatePassword(){let s=!0;return this.password?this.password.length<8?(this.passwordError="Password must be at least 8 characters long",s=!1):/[A-Z]/.test(this.password)?/[a-z]/.test(this.password)?/\d/.test(this.password)||(this.passwordError="Password must contain at least one number",s=!1):(this.passwordError="Password must contain at least one lowercase letter",s=!1):(this.passwordError="Password must contain at least one uppercase letter",s=!1):(this.passwordError="Password is required",s=!1),this.password!==this.confirmPassword&&(this.confirmPasswordError="Passwords do not match",s=!1),s},async resetPassword(){if(this.validatePassword()){this.isLoading=!0;try{await A.A.post("auth/password-reset-otp/reset-with-code/",{email:this.email,code:this.code,new_password:this.password}),this.step="success"}catch(s){console.error("Password reset failed:",s),this.step="error",s.response&&s.response.data&&s.response.data.error?this.errorMessage=s.response.data.error:this.errorMessage="An error occurred while resetting your password. Please try again."}finally{this.isLoading=!1}}}}});var $=o(262);const W=(0,$.A)(B,[["render",q],["__scopeId","data-v-7e8e6db7"]]),F=W}}]);
//# sourceMappingURL=921.9be4742a.js.map