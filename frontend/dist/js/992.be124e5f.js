"use strict";(self["webpackChunkdata_processor_frontend"]=self["webpackChunkdata_processor_frontend"]||[]).push([[992],{992:(e,s,a)=>{a.r(s),a.d(s,{default:()=>S});var t=a(641),l=a(33);const r={class:"profile-view container py-5"},i={class:"mb-4"},o={class:"row justify-content-center"},n={class:"col-md-8"},c={key:0,class:"text-center p-5"},d={key:1,class:"alert alert-danger"},u={key:2},m={class:"text-center mb-4"},p={class:"position-relative d-inline-block mb-3"},g={key:0,class:"avatar-circle"},k={class:"initials"},h=["src"],L={class:"text-muted"},f={class:"text-muted small"},v={class:"mb-1"},b={class:"mb-0"},_={key:0,class:"mt-2"},y={key:1,class:"text-danger mt-2 small"},C={class:"row mt-4"},E={class:"col-md-6 mb-3"},I={class:"card h-100"},w={class:"card-body"},U={class:"text-primary"},x={class:"col-md-6 mb-3"},P={class:"card h-100"},F={class:"card-body"},D={class:"text-success"},A={class:"mt-4"},N={class:"table"};function X(e,s,a,X,j,$){const B=(0,t.g2)("BaseCard");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",i,[(0,t.Lk)("button",{onClick:s[0]||(s[0]=s=>e.$router.go(-1)),class:"btn btn-sm btn-outline-secondary"},s[3]||(s[3]=[(0,t.Lk)("i",{class:"bi bi-arrow-left me-1"},null,-1),(0,t.eW)(" Back ")]))]),(0,t.Lk)("div",o,[(0,t.Lk)("div",n,[(0,t.bF)(B,null,{header:(0,t.k6)((()=>s[4]||(s[4]=[(0,t.Lk)("h5",{class:"mb-0"},"User Profile",-1)]))),default:(0,t.k6)((()=>[j.loading?((0,t.uX)(),(0,t.CE)("div",c,s[5]||(s[5]=[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):j.error?((0,t.uX)(),(0,t.CE)("div",d,(0,l.v_)(j.error),1)):((0,t.uX)(),(0,t.CE)("div",u,[(0,t.Lk)("div",m,[(0,t.Lk)("div",p,[j.user.profile_image_url?((0,t.uX)(),(0,t.CE)("img",{key:1,src:j.user.profile_image_url,alt:"Profile Image",class:"rounded-circle profile-image"},null,8,h)):((0,t.uX)(),(0,t.CE)("div",g,[(0,t.Lk)("span",k,(0,l.v_)($.userInitials),1)])),(0,t.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>$.triggerFileInput&&$.triggerFileInput(...e)),class:"btn btn-sm btn-outline-primary edit-photo-btn"},s[6]||(s[6]=[(0,t.Lk)("i",{class:"bi bi-camera"},null,-1)])),(0,t.Lk)("input",{type:"file",ref:"fileInput",onChange:s[2]||(s[2]=(...e)=>$.handleImageUpload&&$.handleImageUpload(...e)),accept:"image/*",class:"d-none"},null,544)]),(0,t.Lk)("h4",null,(0,l.v_)(j.user.username),1),(0,t.Lk)("p",L,(0,l.v_)(j.user.email),1),(0,t.Lk)("div",f,[(0,t.Lk)("p",v,[s[7]||(s[7]=(0,t.Lk)("i",{class:"bi bi-calendar3"},null,-1)),(0,t.eW)(" Member since: "+(0,l.v_)($.formatDate(j.user.date_joined)),1)]),(0,t.Lk)("p",b,[s[8]||(s[8]=(0,t.Lk)("i",{class:"bi bi-clock"},null,-1)),(0,t.eW)(" Last login: "+(0,l.v_)($.formatDate(j.user.last_login)),1)])]),j.uploadingImage?((0,t.uX)(),(0,t.CE)("div",_,s[9]||(s[9]=[(0,t.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,t.Lk)("span",{class:"ms-1"},"Updating profile image...",-1)]))):(0,t.Q3)("",!0),j.imageUploadError?((0,t.uX)(),(0,t.CE)("div",y,(0,l.v_)(j.imageUploadError),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",C,[(0,t.Lk)("div",E,[(0,t.Lk)("div",I,[(0,t.Lk)("div",w,[s[10]||(s[10]=(0,t.Lk)("h5",{class:"card-title"},"Files",-1)),(0,t.Lk)("h3",U,(0,l.v_)(j.stats.fileCount),1),s[11]||(s[11]=(0,t.Lk)("p",{class:"text-muted"},"Total files uploaded",-1))])])]),(0,t.Lk)("div",x,[(0,t.Lk)("div",P,[(0,t.Lk)("div",F,[s[12]||(s[12]=(0,t.Lk)("h5",{class:"card-title"},"Processed",-1)),(0,t.Lk)("h3",D,(0,l.v_)(j.stats.processedCount),1),s[13]||(s[13]=(0,t.Lk)("p",{class:"text-muted"},"Files processed",-1))])])])]),(0,t.Lk)("div",A,[s[18]||(s[18]=(0,t.Lk)("h5",null,"Account Details",-1)),(0,t.Lk)("table",N,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[s[14]||(s[14]=(0,t.Lk)("th",{scope:"row",style:{width:"40%"}},"Username",-1)),(0,t.Lk)("td",null,(0,l.v_)(j.user.username),1)]),(0,t.Lk)("tr",null,[s[15]||(s[15]=(0,t.Lk)("th",{scope:"row"},"Email",-1)),(0,t.Lk)("td",null,(0,l.v_)(j.user.email),1)]),(0,t.Lk)("tr",null,[s[16]||(s[16]=(0,t.Lk)("th",{scope:"row"},"Member Since",-1)),(0,t.Lk)("td",null,(0,l.v_)($.formatDate(j.user.date_joined)),1)]),(0,t.Lk)("tr",null,[s[17]||(s[17]=(0,t.Lk)("th",{scope:"row"},"Last Login",-1)),(0,t.Lk)("td",null,(0,l.v_)($.formatDate(j.user.last_login)),1)])])])])]))])),_:1})])])])}var j=a(278),$=a(228);const B={name:"ProfileView",components:{BaseCard:$.A},data(){return{loading:!0,error:null,user:{},stats:{fileCount:0,processedCount:0},uploadingImage:!1,imageUploadError:null}},computed:{...(0,j.aH)(["isAuthenticated"]),userInitials(){return this.user.username?this.user.username.charAt(0).toUpperCase():""}},mounted(){this.fetchUserProfile()},methods:{async fetchUserProfile(){this.loading=!0;try{const e=await this.$store.dispatch("fetchUserProfile");this.user={...e,date_joined:e.date_joined||"Not available",last_login:e.last_login||"Not available"};const s=await this.$store.dispatch("fetchFiles");this.stats.fileCount=s.length,this.stats.processedCount=s.filter((e=>e.processed)).length}catch(e){console.error("Error fetching profile:",e),this.error="Failed to load profile data. Please try again."}finally{this.loading=!1}},formatDate(e){if(!e)return"N/A";try{const s=new Date(e);return isNaN(s.getTime())?"N/A":s.toLocaleDateString()+" "+s.toLocaleTimeString()}catch(s){return console.error("Error formatting date:",s),"N/A"}},triggerFileInput(){this.$refs.fileInput.click()},async handleImageUpload(e){const s=e.target.files[0];if(s)if(s.size>5242880)this.imageUploadError="Image size should not exceed 5MB";else if(["image/jpeg","image/png","image/gif"].includes(s.type)){this.uploadingImage=!0,this.imageUploadError=null;try{const e=new FormData;e.append("profile_image",s);const a=await this.$store.dispatch("updateProfileImage",e);this.user={...this.user,profile_image_url:a.profile_image_url}}catch(a){console.error("Error uploading profile image:",a),this.imageUploadError="Failed to upload image. Please try again."}finally{this.uploadingImage=!1}}else this.imageUploadError="Only JPEG, PNG and GIF images are supported"}}};var G=a(262);const M=(0,G.A)(B,[["render",X],["__scopeId","data-v-cb519484"]]),S=M}}]);
//# sourceMappingURL=992.be124e5f.js.map