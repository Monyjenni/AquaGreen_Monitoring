{"version":3,"file":"js/992.c4c0b24f.js","mappings":"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","sources":["webpack://data-processor-frontend/./src/views/ProfileView.vue","webpack://data-processor-frontend/./src/views/ProfileView.vue?3e49"],"sourcesContent":["<template>\n  <div class=\"profile-view container py-5\">\n    <div class=\"mb-4\">\n      <button @click=\"$router.go(-1)\" class=\"btn btn-sm btn-outline-secondary\">\n        <i class=\"bi bi-arrow-left me-1\"></i> Back\n      </button>\n    </div>\n    \n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-8\">\n        <BaseCard>\n          <template #header>\n            <h5 class=\"mb-0\">User Profile</h5>\n          </template>\n          \n          <div v-if=\"loading\" class=\"text-center p-5\">\n            <div class=\"spinner-border text-primary\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </div>\n          \n          <div v-else-if=\"error\" class=\"alert alert-danger\">\n            {{ error }}\n          </div>\n          \n          <div v-else>\n            <div class=\"text-center mb-4\">\n              <div class=\"position-relative d-inline-block mb-3\">\n                <div v-if=\"!user.profile_image_url\" class=\"avatar-circle\">\n                  <span class=\"initials\">{{ userInitials }}</span>\n                </div>\n                <img v-else :src=\"user.profile_image_url\" alt=\"Profile Image\" class=\"rounded-circle profile-image\" />\n                <button @click=\"triggerFileInput\" class=\"btn btn-sm btn-outline-primary edit-photo-btn\">\n                  <i class=\"bi bi-camera\"></i>\n                </button>\n                <input\n                  type=\"file\"\n                  ref=\"fileInput\"\n                  @change=\"handleImageUpload\"\n                  accept=\"image/*\"\n                  class=\"d-none\"\n                />\n              </div>\n              <h4>{{ user.username }}</h4>\n              <p class=\"text-muted\">{{ user.email }}</p>\n              <div class=\"text-muted small\">\n                <p class=\"mb-1\"><i class=\"bi bi-calendar3\"></i> Member since: {{ formatDate(user.date_joined) }}</p>\n                <p class=\"mb-0\"><i class=\"bi bi-clock\"></i> Last login: {{ formatDate(user.last_login) }}</p>\n              </div>\n              <div v-if=\"uploadingImage\" class=\"mt-2\">\n                <div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                <span class=\"ms-1\">Updating profile image...</span>\n              </div>\n              <div v-if=\"imageUploadError\" class=\"text-danger mt-2 small\">{{ imageUploadError }}</div>\n            </div>\n            \n            <div class=\"row mt-4\">\n              <div class=\"col-md-6 mb-3\">\n                <div class=\"card h-100\">\n                  <div class=\"card-body\">\n                    <h5 class=\"card-title\">Files</h5>\n                    <h3 class=\"text-primary\">{{ stats.fileCount }}</h3>\n                    <p class=\"text-muted\">Total files uploaded</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div class=\"col-md-6 mb-3\">\n                <div class=\"card h-100\">\n                  <div class=\"card-body\">\n                    <h5 class=\"card-title\">Processed</h5>\n                    <h3 class=\"text-success\">{{ stats.processedCount }}</h3>\n                    <p class=\"text-muted\">Files processed</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"mt-4\">\n              <h5>Account Details</h5>\n              <table class=\"table\">\n                <tbody>\n                  <tr>\n                    <th scope=\"row\" style=\"width: 40%\">Username</th>\n                    <td>{{ user.username }}</td>\n                  </tr>\n                  <tr>\n                    <th scope=\"row\">Email</th>\n                    <td>{{ user.email }}</td>\n                  </tr>\n                  <tr>\n                    <th scope=\"row\">Member Since</th>\n                    <td>{{ formatDate(user.date_joined) }}</td>\n                  </tr>\n                  <tr>\n                    <th scope=\"row\">Last Login</th>\n                    <td>{{ formatDate(user.last_login) }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </BaseCard>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport BaseCard from '@/components/common/BaseCard.vue';\n\nexport default {\n  name: 'ProfileView',\n  components: {\n    BaseCard\n  },\n  data() {\n    return {\n      loading: true,\n      error: null,\n      user: {},\n      stats: {\n        fileCount: 0,\n        processedCount: 0\n      },\n      uploadingImage: false,\n      imageUploadError: null\n    };\n  },\n  computed: {\n    ...mapState(['isAuthenticated']),\n    userInitials() {\n      if (!this.user.username) return '';\n      return this.user.username.charAt(0).toUpperCase();\n    }\n  },\n  mounted() {\n    this.fetchUserProfile();\n  },\n  methods: {\n    async fetchUserProfile() {\n      this.loading = true;\n      try {\n        // Fetch user profile\n        const response = await this.$store.dispatch('fetchUserProfile');\n        \n        // Directly set the user data from response\n        this.user = {\n          ...response,\n          // Make sure date fields are available or set defaults\n          date_joined: response.date_joined || 'Not available',\n          last_login: response.last_login || 'Not available'\n        };\n        \n        // Get file statistics\n        const files = await this.$store.dispatch('fetchFiles');\n        this.stats.fileCount = files.length;\n        this.stats.processedCount = files.filter(file => file.processed).length;\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n        this.error = 'Failed to load profile data. Please try again.';\n      } finally {\n        this.loading = false;\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      try {\n        const date = new Date(dateString);\n        // Check if date is valid\n        if (isNaN(date.getTime())) return 'N/A';\n        return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\n      } catch (error) {\n        console.error('Error formatting date:', error);\n        return 'N/A';\n      }\n    },\n    triggerFileInput() {\n      this.$refs.fileInput.click();\n    },\n    async handleImageUpload(event) {\n      const file = event.target.files[0];\n      if (!file) return;\n      \n      // Check file size (max 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        this.imageUploadError = 'Image size should not exceed 5MB';\n        return;\n      }\n      \n      // Check file type\n      if (!['image/jpeg', 'image/png', 'image/gif'].includes(file.type)) {\n        this.imageUploadError = 'Only JPEG, PNG and GIF images are supported';\n        return;\n      }\n      \n      this.uploadingImage = true;\n      this.imageUploadError = null;\n      \n      try {\n        const formData = new FormData();\n        formData.append('profile_image', file);\n        \n        // Call the API to update the profile image\n        const response = await this.$store.dispatch('updateProfileImage', formData);\n        \n        // Update the user data with the new profile image URL\n        this.user = {\n          ...this.user,\n          profile_image_url: response.profile_image_url\n        };\n      } catch (error) {\n        console.error('Error uploading profile image:', error);\n        this.imageUploadError = 'Failed to upload image. Please try again.';\n      } finally {\n        this.uploadingImage = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.avatar-circle {\n  width: 100px;\n  height: 100px;\n  background-color: #198754;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.initials {\n  font-size: 48px;\n  color: white;\n  font-weight: bold;\n}\n\n.profile-image {\n  width: 100px;\n  height: 100px;\n  object-fit: cover;\n}\n\n.edit-photo-btn {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  border-radius: 50%;\n  padding: 0.3rem;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: white;\n}\n</style>\n","import { render } from \"./ProfileView.vue?vue&type=template&id=cb519484&scoped=true\"\nimport script from \"./ProfileView.vue?vue&type=script&lang=js\"\nexport * from \"./ProfileView.vue?vue&type=script&lang=js\"\n\nimport \"./ProfileView.vue?vue&type=style&index=0&id=cb519484&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cb519484\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","$event","_ctx","$router","go","_createTextVNode","_hoisted_3","_hoisted_4","_createVNode","_component_BaseCard","header","_withCtx","default","$data","loading","_hoisted_5","role","error","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","user","profile_image_url","src","alt","_hoisted_12","_hoisted_10","_hoisted_11","$options","userInitials","args","triggerFileInput","type","ref","onChange","handleImageUpload","accept","username","_hoisted_13","email","_hoisted_14","_hoisted_15","formatDate","date_joined","_hoisted_16","last_login","uploadingImage","_hoisted_17","_createCommentVNode","imageUploadError","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","stats","fileCount","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","processedCount","_hoisted_28","_hoisted_29","scope","style","_","name","components","BaseCard","data","computed","mapState","this","charAt","toUpperCase","mounted","fetchUserProfile","methods","response","$store","dispatch","files","length","filter","file","processed","console","dateString","date","Date","isNaN","getTime","toLocaleDateString","toLocaleTimeString","$refs","fileInput","click","event","target","size","includes","formData","FormData","append","__exports__","render"],"sourceRoot":""}